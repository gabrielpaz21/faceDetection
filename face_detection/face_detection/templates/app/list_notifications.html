{% extends "base.html" %}
{% load i18n static %}

{% block content %}
<div id="app" class="az-content-body">
	<div class="az-content-body-left">
		<div class="row row-sm mg-b-20">
			<div class="col-lg-12">
				<div class="card card-table-two">
					<h6 class="card-title">Notificaciones</h6>
					<div class="table-responsive mg-t-20">
						<table class="table table-striped table-dashboard-two mg-b-0">
							<thead>
								<tr>
									<th class="wd-lg-15p">Estatus</th>
									<th class="wd-lg-25p">Persona detectada</th>
									<th class="wd-lg-20p tx-right">Fecha</th>
									<th class="wd-lg-25p tx-right">Ubicación</th>
									<th class="wd-lg-15p tx-right">Detalles</th>
								</tr>
							</thead>
							<tbody>
								{% for notification in notifications %}
								<tr>
									<td>
										{% if notification.is_ready %}
										    <span class="text-success">Visto</span>
										{% else %}
										    <span class="text-danger">Nuevo</span>
										{% endif %}
									</td>
									<td>{{ notification.person_name | upper }}</td>
									<td class="tx-right tx-inverse">
										{{ notification.created }}
									</td>
									<td class="tx-right tx-inverse">
										{{ notification.camera.description }}
									</td>
									<td class="tx-right tx-danger">
									    <a href="javascript:vois(0)">
									    	Ver
									    </a>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
						{% if is_paginated %}
		                    <div class="list-group d-block">
				              <br/>
				              <ul class="pager text-right">
				                {% if notifications.has_previous %}
				                  <a class="btn btn-secondary" href="?page={{ notifications.previous_page_number }}">Anterior</a>
				                {% endif %}
				                {% if notifications.has_next %}
				                  <a class="btn btn-success" href="?page={{ notifications.next_page_number }}">Siguiente</a>
				                {% endif %}
				              </ul>
				            </div>
		            	{% endif %}
					</div><!-- table-responsive -->
				</div><!-- card-dashboard-five -->
			</div><!-- col -->
		</div><!-- row -->
		<!-- END GRID 1 -->
	</div>

	<!-- NOTIFICATIONS -->
	<div class="az-content-body-right">
		<label class="az-content-label tx-base mg-b-25">
			Notificaciones <span class="text-danger tx-9" v-if="not_read !== 0">[[ not_read ]] Nuevos</span>
		</label>
		<div v-if="!emptyNotifications">
			<div class="az-media-list-reviews">
				<div class="media" v-for="notification in notifications">
					<div class="az-img-user"><img src="https://via.placeholder.com/500" alt=""></div>
					<div class="media-body">
						<div class="d-flex justify-content-between mg-b-10">
							<div>
								<small class="text-danger" v-if="!notification.is_ready">Nueva detección</small>
								<h6 class="mg-b-0">Detectado: [[ notification.person_name ]]</h6>
								<div class="az-star-group">
									<span>[[ notification.created ]]</span>
								</div><!-- star-group -->
							</div>
						</div>
						<p class="mg-b-0">Se ha detectado a [[ notification.person_name ]] por [[ notification.cam_description ]]... <a href="">Ver más</a></p>
					</div><!-- media-body -->
				</div><!-- media -->
			</div><!-- media-list -->
			<br/>
			<a href="" class="btn btn-outline-light btn-block">Ver todas las notificaciones</a>
		</div>
		<div v-if="emptyNotifications">
			<div class="az-media-list-reviews">
				<div class="media text-center">
					<span class="btn btn-block text-center">No hay notificaciones</span>
				</div><!-- media -->
			</div><!-- media-list -->
		</div>
	</div>
    <!-- END NOTIFICATIONS -->
    {% include "app/modals/camera_modals.html" %}
</div><!-- az-content-body -->
{% endblock content %}

{% block extra_js %}
 <script src="https://vuejs.org/js/vue.min.js"></script>
 <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
 <script src="{% static 'js/dashboard.js' %}"></script>
{% endblock extra_js %}